!function(e){function t(r){if(a[r])return a[r].exports;var s=a[r]={exports:{},id:r,loaded:!1};return e[r].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){var r=a(2);new r},function(e,t){},function(e,t,a){var r,s;a(1),function(n,i){r=i,s="function"==typeof r?r.call(t,a,t,e):r,!(void 0!==s&&(e.exports=s))}(this,function(){function e(e){this.defaults={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],holiday:{2.23:"2B青年节",3.8:"妇女节",5.1:"黄金周^_~",5.4:"青年节"},weekendTipMsg:"马上放假~",workTipMsg:"工作日",currentDate:new Date,maxDate:2020,container:document.body},this.init(e)}var t=e.prototype;return t.init=function(e){if("string"==typeof e?this.defaults.container=this.dom.byId(e):(n.extend(this.defaults,e),e&&e.container&&(this.defaults.container=this.dom.byId(e.container))),this.task={},this.selectYearId=Math.random().toString(36).substring(3,8),this.selectMonthId=Math.random().toString(36).substring(3,8),this.dateContainerId=Math.random().toString(36).substring(3,8),"string"==typeof this.defaults.currentDate){var t=this.defaults.currentDate.split("-");this.defaults.currentDate=new Date(Date.UTC(+t[0],+t[1]-1,+t[2]))}this.createCalendar()},t.createCalendar=function(){this.calendar=this.dom.create("div"),this.calendar.className="calendar",this.createYearAndMonth(),this.createCalendarHeader(),this.createDate(),this.dom.removeAllChild(this.defaults.container),this.defaults.container.appendChild(this.calendar),this.bindEvent()},t.createYearAndMonth=function(){var e=this.dom.create("div");e.className="selectArea",e.appendChild(this.createYear()),e.appendChild(this.createMonth()),this.calendar.appendChild(e)},t.createCalendarHeader=function(){var e=this.dom.create("ul"),t=this.defaults.dayNames;e.className="header";for(var a=0;a<t.length;a++){var r=this.dom.create("li");r.innerText=t[a],e.appendChild(r)}this.calendar.appendChild(e)},t.createYear=function(){var e=this.dom.create("select");this.dom.setAttr(e,"id",this.selectYearId),e.className="year-list";for(var t=1990;t<=(this.defaults.maxDate||this.defaults.currentDate.getFullYear());t++){var a=this.dom.create("option"),r=document.createTextNode(t);a.setAttribute("value",t),a.appendChild(r),t===this.defaults.currentDate.getFullYear()&&a.setAttribute("selected",!0),e.appendChild(a)}return e},t.createMonth=function(){var e=this.dom.create("ul"),t=this.defaults.monthNames;e.setAttribute("id","month"),e.className="month-list",this.dom.setAttr(e,"id",this.selectMonthId);for(var a=0;a<t.length;a++){var r=this.dom.create("li");r.innerText=t[a],this.dom.setAttr(r,"value",a),a==this.defaults.currentDate.getMonth()&&(r.className="active"),e.appendChild(r)}return e},t.createDate=function(){var e=this.dom.byId(this.dateContainerId)||this.dom.create("table");e.className="main",e.setAttribute("cellspacing",8),e.setAttribute("id",this.dateContainerId),this.dom.removeAllChild(e);for(var t=this.inserData(),a=0,r=1;r<=Math.ceil(t.length/7);r++){for(var s=this.dom.create("tr"),n=1;n<8;n++){var i=t[a++],d=this.dom.create("td"),o=this.dom.create("span");o.className="date",d.className=this.processTdClass(i),o.innerText=i.str,d.appendChild(o),this.dom.setAttr(d,"ymd",i.date),this.processTd(d,i),s.appendChild(d)}e.appendChild(s)}this.calendar.appendChild(e)},t.inserData=function(e){var t=e||this.defaults.currentDate,a=this,r=this.getFirstDay(t),s={preMonthOffset:r?r:7-r,endDate:this.getDaysOfMonth(t)},i=null,d=n.createArr(s.preMonthOffset).map(function(){return i||(i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),1))),i=n.addDayNum(i,-1),a.processDate(i,t,!0)}).reverse();i=null;var o=n.createArr(s.endDate).map(function(){return i=i?n.addDayNum(i,1):new Date(Date.UTC(t.getFullYear(),t.getMonth(),1)),a.processDate(i,t,!1)});i=null;var h=Math.ceil((s.endDate+d.length)/7),l=n.createArr(7*h-(s.endDate+d.length)).map(function(){return i=i?n.addDayNum(i,1):new Date(Date.UTC(t.getFullYear(),t.getMonth()+1,1)),a.processDate(i,t,!0)});return d.concat(o,l)},t.bindEvent=function(){var e=this.dom.byId(this.selectYearId),t=this.dom.byId(this.selectMonthId),a=this.dom.byId(this.dateContainerId),r=this;n.addEve(e,"change",function(e){r.updateView()}),n.addEve(t,"click",function(e){if("LI"===(e.target||e.srcElement).nodeName){for(var a=t.childNodes,s=0;s<a.length;s++)a[s].className="";(e.target||e.srcElement).className="active",r.updateView()}}),n.addEve(a,"click",function(e){r.createTask(e.target||e.srcElement)})},t.updateView=function(){for(var e=this.dom.byId(this.selectYearId),t=this.dom.byId(this.selectMonthId),a=this.defaults.currentDate.getMonth(),r=0;r<t.childNodes.length;r++)if(n.hasClass(t.childNodes[r],"active")){a=this.dom.getAttr(t.childNodes[r],"value");break}this.defaults.currentDate=new Date(Date.UTC(e.value,+a,this.defaults.currentDate.getDate())),this.createDate()},t.getCalendarColNumsByMonth=function(e){return Math.ceil(this.getDaysOfMonth(e)/7)},t.getDaysOfMonth=function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth()+1,0)).getDate()},t.getFirstDay=function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),1)).getDay()},t.processDate=function(e,t,a){var r=new Date;return{str:n.formatDate(e.getTime(),10),current:e.getTime()===new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())).getTime(),date:n.formatDate(e.getTime(),6),isWeekend:0===e.getDay()||6===e.getDay(),holiday:this.isHoliday(e),disabled:a,task:this.getTask(e),isShowRightTopMsg:{isShow:~~(2*Math.random()),msg:["请病假","头晕","无聊","-_-||"][~~(4*Math.random())]}}},t.processTdClass=function(e){var t="day";return e.isWeekend&&(t+=" week"),e.holiday&&e.holiday.isHoliday&&(t+=" holiday"),e.current&&(t+=" active"),e.disabled&&(t+=" disabled"),t},t.processTd=function(e,t){if(t.holiday.isHoliday&&this.createTdLabel(e,t.holiday.text),!t.isWeekend&&!t.holiday.isHoliday){var a=["#f3faf0","#ffeee6","#eaf8fe","#fff7e6","#87d068"][~~(5*Math.random())];this.createTdLabel(e,t.isShowRightTopMsg.isShow?t.isShowRightTopMsg.msg:this.defaults.workTipMsg,"right-top",a),this.createTdLabel(e,this.defaults.workTipMsg)}if(t.isWeekend&&this.createTdLabel(e,this.defaults.weekendTipMsg),t.task.length){var r=this.dom.create("ul");r.className="task";for(var s=0;s<t.task.length;s++){var n=this.dom.create("li");n.innerText=t.task[s],n.style.cssText="background:"+["#f3faf0","#ffeee6","#eaf8fe","#fff7e6"][~~(4*Math.random())],r.appendChild(n)}e.appendChild(r)}},t.isHoliday=function(e){var t=this.defaults.holiday[e.getMonth()+1+"."+e.getDate()];return{isHoliday:!!t,text:t?t:""}},t.createTdLabel=function(e,t,a,r){var s=this.dom.create("label");s.innerText=t,s.className=a||"right-bottom",s.style.cssText="background:"+r,e.appendChild(s)},t.getTask=function(e){return this.task[n.formatDate(e.getTime(),6)]||[]},t.createTask=function(e,t){var a=t||prompt("Hey, buddy! 你想记个啥?");if(a){this.task[this.dom.getAttr(e,"ymd")]||(this.task[this.dom.getAttr(e,"ymd")]=[]),this.task[this.dom.getAttr(e,"ymd")].push(a);var r=e.getElementsByTagName("ul")[0]||this.dom.create("ul");r.className="task";var s=this.dom.create("li");s.innerText=a,s.style.cssText="background:"+["#f3faf0","#ffeee6","#eaf8fe","#fff7e6"][~~(4*Math.random())],r.appendChild(s),e.appendChild(r)}},t.dom={create:function(e){return document.createElement(e)},byId:function(e){return document.getElementById(e)},getAttr:function(e,t){return e.getAttribute(t)},setAttr:function(e,t,a){return e.setAttribute(t,a)},removeAllChild:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}},e}),Array.prototype.map||(Array.prototype.map=function(e,t){var a,r,s,n=Object(this),i=n.length;for(arguments.length>1&&(a=t),r=new Array(i),s=0;s<i;){var d,o;s in n&&(d=n[s],o=e.call(a,d,s,n),r[s]=o),s++}return r}),Date.prototype.format=function(e){if(e=e||"",isNaN(this))return"";var t={"m+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"n+":this.getMinutes(),"s+":this.getSeconds(),S:this.getMilliseconds(),W:["日","一","二","三","四","五","六"][this.getDay()],"q+":Math.floor((this.getMonth()+3)/3)};e.indexOf("am/pm")>=0&&(e=e.replace("am/pm",t["h+"]>=12?"下午":"上午"),t["h+"]>=12&&(t["h+"]-=12)),/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var n={hasProperty:Object.prototype.hasOwnProperty,extend:Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)this.hasProperty.call(e,r)&&(e[r]=a[r])}return e},addEve:function(e,t,a,r){e.addEventListener?e.addEventListener(t,a,r||!1):e.attachEvent&&e.attachEvent("on"+t,a)},removeEve:function(e,t,a){e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a)},createArr:function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=a;return t},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(hasClass(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(a," ")}},addDayNum:function(e,t){return new Date(e.getTime()+864e5*t)},formatDate:function(e,t){var a="yyyy-mm-dd hh:nn";switch(t){case 1:a="yyyy年mm月dd日";break;case 2:a="hh:nn";break;case 3:a="yyyy.mm.d";break;case 4:a="yyyy-mm-dd hh:nn:ss";break;case 5:a="yyyy年mm月";break;case 6:a="yyyy-mm-dd";break;case 7:a="yyyy年mm月dd日 hh:nn";break;case 8:a="mm月dd日";break;case 9:a="mm月dd日 hh:nn";break;case 10:a="mm-dd";break;case 0:a="yyyy/mm/dd";break;default:a=t?t:a}if(isNaN(e)||null===e)return"";if("object"==typeof e){var r=dd.getFullYear(),s=dd.getMonth(),n=dd.getDate();return s<10&&(s="0"+s),new Date(Date.UTC(r,s,n)).format(a)}return new Date(parseInt(e)).format(a)}}}]);
//# sourceMappingURL=calendar.min.js.map